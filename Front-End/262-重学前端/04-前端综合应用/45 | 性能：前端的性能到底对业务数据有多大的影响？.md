# [45 | 性能：前端的性能到底对业务数据有多大的影响？](https://time.geekbang.org/column/article/94156?utm_source=time_web&utm_medium=menu)

## 性能总结

> while 循环快还是for 循环快？
> |0 是不是比 Math.floor 性能好？

性能优化不能只着眼于局部的代码。**一切没有profiling的性能都是耍流氓。**凡事真正有价值的性能优化，必定是从端到端的业务场景建立体系来考虑的。

性能体系的建立可以分成以下几部分：
- 现状评估和建立指标
- 技术方案
- 执行
- 结果评估和监控

### 现状评估和建立指标

性能问题最重要的几个点是：
- 页面加载性能
- 动画与操作性能
- 内存、电量消耗

> 这三部分中，“页面加载性能”跟用户的流失率有非常强的关联性。

使用“用户平均加载时间”衡量页面加载性能存在的问题：
- 当加载时间低于一定数字，用户体感差别不大。这个数字大约是1s。
- 少数超长时间加载的用户（如2G），会极大影响整个指标，即指标不能反应大多数用户的体验。

于是，可以设计新的指标-秒开率，即一秒之内打开的用户用用户总量的百分比。

### 技术方案

有了指标，有来优化目标，开始技术出场。

从输入URL后按下会车，了解浏览器的大致的工作工程，必须理解的几件事：
- 从域名到IP 地址，需要用DNS 协议查询
- HTTP 协议是用TCP 传输的，所以会有TCP 建立连接过程
- 如果使用HTTPS，还要有HTTPS 交换证书
- 每个网页还有图片等请求

因此，网页的加载时间，不但跟体积有关系，还跟请求数有很大关系。

设计的技术方案大约是这样：

![设计的技术方案大约是这样。](https://static001.geekbang.org/resource/image/6b/f2/6b5051c452af8c3db5fbb8ba6b9e34f2.jpg)

### 执行

方案靠技术，执行靠工程实施。

根据实际情况。工程实施可能有不同程度，从低到高分成：
- 纯管理
- 制度化
- 自动化



### 结果评估和监控

线上监控
- 数据采集
- 数据展现

