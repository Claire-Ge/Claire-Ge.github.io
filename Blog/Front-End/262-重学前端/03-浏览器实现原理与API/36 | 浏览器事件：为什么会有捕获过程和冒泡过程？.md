# [36 | 浏览器事件：为什么会有捕获过程和冒泡过程？](https://time.geekbang.org/column/article/90485?utm_source=time_web&utm_medium=menu)

## 事件概述

事件来源于输入设备。

我们平时的个人设备上，输入设备有三种：
- 键盘
- 鼠标
- 触摸屏

**触摸屏和鼠标有一定的共性，他们被称作pointer设备，即它的输入最终会被抽象成屏幕上面的一个点。**

现代UI系统，都源自WIMP系统。**WIMP即Window Icon Menu Pointer 四个要素**。

我们能够点击鼠标上的按钮或者触摸屏，是操作系统或者浏览器把这个信息对应到了一个逻辑上的按钮，再使得它的视图对应点击事件有反应。

### 捕获与冒泡

捕获过程：从外向内；操作系统根据鼠标点击的位移的累积计算，转换为具体的元素上的事件的过程；捕获是计算机处理事件的逻辑。

冒泡过程：从内向外。相当于人类逻辑：当你按电视机开关时，也按到了电视机；冒泡是人类处理事件的逻辑。

以下代码展示来事件传播顺序：

```
<body>
  <input id="i"/>
</body>
```

```
document.body.addEventListener("mousedown", () => {
  console.log("key1")
}, true)

document.getElementById("i").addEventListener("mousedown", () => {
  console.log("key2")
}, true)

document.body.addEventListener("mousedown", () => {
  console.log("key11")
}, false)

document.getElementById("i").addEventListener("mousedown", () => {
  console.log("key22")
}, false)
```

监听body和一个body的子元素上的鼠标按下事件，捕获和冒泡分别监听，最终产生的顺序是：
- key1
- key2
- key22
- key11

在一个事件发生时，捕获过程跟冒泡过程总是先后发生，跟你是否监听毫无关联。

在实际监听事件时，建议这样使用冒泡和捕获机制：默认使用冒泡模式，当开发组件时，遇到需要父元素控制子元素的行为，可以使用捕获机制。





